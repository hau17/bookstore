<div class="container py-4">

  <h3 class="mb-3">Chi tiết đơn hàng #{{order.id}}</h3>

  <p><strong>Trạng thái:</strong> {{order.status_name}}</p>
  <p><strong>Ngày tạo:</strong> {{formatDateTime order.created_at}}</p>

  <h5 class="mt-4">Sản phẩm</h5>
  <ul class="list-group">
    {{#each items}}
      <li class="list-group-item d-flex justify-content-between">
        <span>{{this.book_title}} (x{{this.quantity}})</span>
        <span>Giá tiền: {{formatPrice this.price}} đ</span>
        <span>Tổng: {{formatPrice this.total_amount}} đ</span>
      </li>
    {{/each}}
  </ul>

  <h5 class="mt-4">Lịch sử trạng thái</h5>
  <ul class="list-group">
    {{#each history}}
      <li class="list-group-item">
        {{this.status_name}}
        —
        {{formatDateTime this.created_at}}
      </li>
    {{/each}}
  </ul>

  {{! Cho hủy nếu đơn còn pending }}
  {{#if (eq order.status_id "1")}}
    <button
      class="btn btn-danger mt-4"
      data-bs-toggle="modal"
      data-bs-target="#cancel-order-modal"
      data-id="{{order.id}}"
      data-name="Đơn hàng #{{order.id}}"
    >
      Hủy đơn hàng
    </button>
  {{/if}}
  {{! nút quay lại trang  }}
  <a href="/account/orders" class="btn btn-secondary mt-4">Quay lại</a>
</div>

<script src="/js/admin/common-modal.js"></script>
<script src="/js/client/order.js"></script>